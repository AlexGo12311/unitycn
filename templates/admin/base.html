{{ define "admin/base" }}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.title}} - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { display: flex; min-height: 100vh; background: #f4f7f6; }
        .sidebar { width: 250px; background: #343a40; color: white; padding: 20px; }
        .sidebar a { color: #adb5bd; text-decoration: none; display: block; padding: 10px; }
        .sidebar a.active { color: white; background: #495057; border-radius: 5px; }
        .main-content { flex: 1; padding: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; }
        .number { font-size: 24px; font-weight: bold; color: #007bff; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h3>Unity Admin</h3>
        <hr>
        <nav>
            <a href="/admin/" class="{{if eq .title "–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"}}active{{end}}">üìä –î–∞—à–±–æ—Ä–¥</a>
            <a href="/admin/users" class="{{if eq .title "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"}}active{{end}}">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
            <a href="/admin/posts" class="{{if eq .title "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–º–∏"}}active{{end}}">üìù –ü–æ—Å—Ç—ã</a>
            <a href="/admin/comments" class="{{if eq .title "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏"}}active{{end}}">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</a>
            <a href="/admin/heroes" class="{{if eq .title "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ—Ä–æ—è–º–∏"}}active{{end}}">‚≠ê –ì–µ—Ä–æ–∏</a>
            <hr>
            <a href="/" target="_blank">üåê –ù–∞ —Å–∞–π—Ç</a>
            <a href="/logout" style="color: #ff6b6b;">üö™ –í—ã–π—Ç–∏</a>
        </nav>
    </div>

    <div class="main-content">
        <header class="mb-4">
            <h2>{{.title}}</h2>
        </header>
        
        {{ template "page_content" . }}
    </div>

    <script>
        async function apiCall(url, method, body = null) {
            const options = { method };
            if (body) {
                options.headers = { 'Content-Type': 'application/json' };
                options.body = JSON.stringify(body);
            }
            const res = await fetch(url, options);
            if (res.ok) {
                location.reload();
            } else {
                const data = await res.json();
                alert("–û—à–∏–±–∫–∞: " + (data.error || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"));
            }
        }

        function deleteUser(id) { if(confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')) apiCall(`/admin/users/${id}`, 'DELETE'); }
        function deletePost(id) { if(confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç?')) apiCall(`/admin/posts/${id}`, 'DELETE'); }
        function deleteComment(id) { if(confirm('–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?')) apiCall(`/admin/comments/${id}`, 'DELETE'); }
    </script>
</body>
</html>
{{ end }}